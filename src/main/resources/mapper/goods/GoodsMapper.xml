<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beauty4u.backend.goods.query.mapper.GoodsQueryMapper">
<!--    조건별 상품 조회 -->
    <select id="findGoods" resultType="com.beauty4u.backend.goods.query.dto.GoodsQueryDTO">
        SELECT
            g.goods_code,
            g.goods_name,
            b.brand_code,
            g.goods_skintype,
            g.goods_price
        FROM goods g
        JOIN brand b ON (g.brand_code = b.brand_code)
        <where>
            <if test="brand_code != null and brand_code != ''">
                AND b.brand_code = #{brand_code}
            </if>
            <if test="goods_name != null and goods_name != ''">
                AND g.goods_name LIKE CONCAT('%', #{goods_name}, '%')
            </if>
        </where>
        ORDER BY g.goods_created_date
    </select>

<!--    브랜드 목록 조회 -->
    <select id="findAllBrand" resultType="com.beauty4u.backend.goods.query.dto.BrandQueryDTO">
        SELECT
            brand_name
        FROM brand
    </select>
</mapper>